const node_openssl = require('../index.js');
var fs = require('fs');

var options = {
	//binpath: 'C:/Program Files/OpenVPN/bin/openssl.exe'
	binpath: 'C:/Program Files/OpenSSL-Win64/bin/openssl.exe'
}

var openssl = new node_openssl(options);

fs.readFile('./compare.key', function(err, key) {
	/*openssl.importRSAPrivateKey(key.toString(), false, function(err, out) {
		if(err) {
			console.log('DONE1');
			console.log(err);
		} else {
			console.log(out);
		}
	})*/
	fs.readFile('./compare.crt', function(err, cert) {
		openssl.checkRSAMatch(key.toString(), 'test123', cert.toString(), function(err, out, cmd) {
			if(err) {
				//console.log('DONE2');
				openssl.checkECCMatch(key.toString(), 'test123', cert.toString(), function(err, out, cmd) {
					if(err) {
						console.log(err);
					} else {
						console.log(out);
					}
				});
			} else {
				console.log(out);
			}
		});
	});
});